<!DOCTYPE html><html data-bs-theme="light" lang="de"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><title>RegineWinkelmann</title><link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin:700&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Smythe&amp;display=swap"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="assets/css/styles.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"></head><body><nav class="navbar navbar-expand-xl fixed-top pb-4 pb-sm-4 pb-md-3 pb-lg-3 pb-xl-3 pb-xxl-3" id="mainNav"><div class="container"><img src="assets/img/DachsSymbolEffects.png" width="52" height="50"><a class="navbar-brand d-none d-sm-inline-block d-md-inline-block" href="#">Regine Winkelmann</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navbarResponsive" type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" value="Menu"><i class="fa fa-bars"></i></button><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ms-auto"><li class="nav-item nav-link"><a class="nav-link" href="index.html#header" data-bs-target="index.html#header">Startseite</a></li><li class="nav-item nav-link"><a class="nav-link" href="index.html#about">Über die Autorin</a></li><li class="nav-item nav-link"><a class="nav-link" href="index.html#product">Der Dachs und die Welt</a></li><li class="nav-item nav-link"><a class="nav-link" href="#contact">Kontakt</a></li><li class="nav-item nav-link"><div id="vue-cart-badge" class="nav-link-wrapper" style="visibility: hidden;">
  <a class="nav-link" href="cart.html">
    <span class="d-inline-block d-sm-inline-block d-md-inline-block d-lg-inline-block d-xl-none">Warenkorb</span>
    <i class="fa fa-shopping-basket"></i>
    <span v-if="cartItemCount > 0" class="badge price-badge text-bg-primary text-white">{{ cartItemCount }}</span>
  </a>
</div>

<script type="text/javascript">
(() => {
  function onReady(fn){
    if (document.readyState === "complete" || document.readyState === "interactive") setTimeout(fn,0);
    else document.addEventListener("DOMContentLoaded", fn, { once: true });
  }
  function whenShopAndVue(cb){
    if (window.Shop && window.Vue && window.Vue.createApp) cb();
    else setTimeout(() => whenShopAndVue(cb), 20);
  }

  onReady(() => whenShopAndVue(() => {
    const { createApp } = window.Vue;

    createApp({
      data(){ 
        return { 
          cartItemCount: 0 
        }; 
      },
      methods:{
        updateCount(){
          this.cartItemCount = Shop.cartCount();
        }
      },
      mounted(){
        this.updateCount();
        // Vue ist ready - Element sichtbar machen
        this.$el.style.visibility = 'visible';
        // Live-Updates: reagiert auf Shop.add / sonstige Änderungen
        Shop.onCartChange(() => this.updateCount());
      }
    }).mount('#vue-cart-badge');
  }));
})();
</script></li></ul></div></div></nav><header id="header" class="masthead shorthead" style="background: url(&quot;assets/img/DachsbuchPromo_Viewport.jpg&quot;);background-size: cover;"><div class="intro-body"><div class="container"><div class="row"><div class="col-lg-8 mx-auto"><h1 class="brand-heading">Warenkorb</h1></div></div></div></div></header><section class="text-center py-4 content-section" id="checkout"><div class="container-fluid"><div class="row"><div class="col-lg-8 mx-auto"><div>
  <div id="vue-cart-app" class="cart">
    <div class="card shadow-sm">
      <div class="card-header d-flex align-items-center justify-content-between">
        <div class="fw-semibold">Warenkorb</div>
        <span class="badge text-bg-secondary">Artikel gesamt: {{ totalQty }}</span>
      </div>

      <div class="card-body">
        <div v-if="isEmpty" class="alert alert-secondary mb-0">
          Dein Warenkorb ist leer.
        </div>

        <div v-else class="list-group list-group-flush">
          <div class="list-group-item d-flex align-items-center justify-content-between flex-wrap gap-3"
               v-for="it in items" :key="it.product">
            <div class="d-flex align-items-center gap-3">
              <img v-if="it.thumb" :src="it.thumb" alt="" style="width:56px;height:56px;object-fit:cover;border-radius:.5rem;">
              <div class="small">
                <div class="fw-semibold">{{ it.title || it.product }}</div>
                <div class="text-muted">Einzelpreis: {{ fmt(it.unit_gross_cents) }} <small>(inkl. {{ it.vat_percent }}% MwSt.)</small></div>
              </div>
            </div>

            <div class="d-flex align-items-center gap-2">
              <button class="btn btn-outline-secondary" @click="dec(it)" aria-label="Menge verringern">−</button>
              <input type="number" min="1" max="100" class="form-control text-center" style="width: 90px"
                     v-model.number="it.quantity" @input="setQty(it)" />
              <button class="btn btn-outline-secondary" @click="inc(it)" aria-label="Menge erhöhen">+</button>

              <div class="ms-3 fw-semibold">
                {{ fmt(it.line_gross_cents) }}
              </div>

              <button class="btn btn-outline-danger ms-2" @click="remove(it)">
                <i class="fa fa-trash-o"></i>
              </button>
            </div>
          </div>

          <!-- Summenzeile -->
          <div class="list-group-item d-flex justify-content-end">
            <div class="text-end">
              <div class="fw-semibold">Zwischensumme: {{ fmt(subtotalGrossCents) }}</div>
              <div class="text-muted small">inkl. MwSt., zzgl. Versandkosten</div>
              <div class="text-muted small">Netto: {{ fmt(subtotalNetCents) }} + MwSt: {{ fmt(subtotalVatCents) }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="card-footer d-flex align-items-center gap-2">
        <a class="btn btn-primary ms-auto text-white" :class="{ disabled: isEmpty }" :href="checkoutHref">
          <i class="fa fa-shopping-basket"></i>
          Zur Kasse</a>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
(() => {
  function onReady(fn){
    if (document.readyState === "complete" || document.readyState === "interactive") setTimeout(fn,0);
    else document.addEventListener("DOMContentLoaded", fn, { once: true });
  }
  function whenVue(cb){
    if (window.Vue && window.Vue.createApp) cb();
    else setTimeout(() => whenVue(cb), 20);
  }

  onReady(() => whenVue(() => {
    const { createApp } = window.Vue;

    createApp({
      data(){ return { items: [] }; },
      computed:{
        totalQty(){ return this.items.reduce((s,i)=>s + i.quantity, 0); },
        isEmpty(){ return this.items.length === 0; },
        checkoutHref(){ return "/checkout.html"; },
        subtotalNetCents(){ return this.items.reduce((s,i)=>s + (i.unit_net_cents * i.quantity), 0); },
        subtotalGrossCents(){ return this.items.reduce((s,i)=>s + (i.unit_gross_cents * i.quantity), 0); },
        subtotalVatCents(){ return this.subtotalGrossCents - this.subtotalNetCents; }
      },
      methods:{
        load(){ this.items = Shop.getCartDetailed(); },
        fmt(cents){ return Shop.formatCents(cents); },

        // Menge sofort in den Store übernehmen (auch bei Direkteingabe)
        setQty(item){
          const q = Math.max(1, Math.min(100, parseInt(item.quantity,10) || 1));
          Shop.setQtyByStripeId(item.product, q);
          // kein hard reload nötig, onCartChange übernimmt; hier dennoch local angleichen
          item.quantity = q;
          item.line_net_cents = item.unit_net_cents * q;
          item.line_gross_cents = item.unit_gross_cents * q;
        },
        inc(item){ item.quantity = Math.min(100, (item.quantity|0) + 1); this.setQty(item); },
        dec(item){ item.quantity = Math.max(1,  (item.quantity|0) - 1); this.setQty(item); },

        remove(item){ Shop.removeByStripeId(item.product); },
        clear(){ if (confirm("Warenkorb wirklich leeren?")) Shop.clearCart(); },
      },
      mounted(){
        this.load();
        // Live-Updates: reagiert auf Shop.add / sonstige Änderungen von außen
        Shop.onCartChange(() => this.load());
      }
    }).mount('#vue-cart-app');
  }));
})();
</script>
</div></div></div></section><footer class="py-0"><div class="p-3 mb-2"><div class="container text-center"><div class="row"><div class="col-12 col-sm-12 col-md-5"><p class="my-2">2025 © Regine Winkelmann</p></div><div class="col-2 d-none d-sm-none d-md-block"><img src="assets/img/DachsSymbolEffects.png" width="58" height="56"></div><div class="col-12 col-sm-12 col-md-5"><ul class="list-inline my-2"><li class="list-inline-item"><a href="impressum.html">Impressum</a></li><li class="list-inline-item"><a href="agb.html">AGB</a></li><li class="list-inline-item"><a href="widerrufsbelehrung.html">Widerrufsbelehrung</a></li><li class="list-inline-item"><a href="versand.html">Versand</a></li></ul></div></div></div></div><div class="p-2" style="background: #1c1c1c;"><div class="container text-center"><div class="row"><div class="col"><div class="vaax-copyright" id="vaax-button" style="color:#fff;">
    <a href="https://va.ax/" style="color: #fff; text-decoration: none; font-family: Arial, Helvetica, sans-serif;">Webdesign realisiert durch die <i style="content: ''; width: 16px; height: 16px; position: relative; top: 2px; display: inline-block; background-position: center; background-repeat: no-repeat; background-size: contain; background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxODguMjc0IiBoZWlnaHQ9IjE5NC42MiIgdmlld0JveD0iMCAwIDE4OC4yNzQgMTk0LjYyIj4NCiAgPHBhdGggaWQ9IkxvZ29TaW5nbGVXaGl0ZSIgZD0iTTEzOC4yODYsMTguMDdsOTMuODY3LDE0OS42MDdMMjA0LjUxLDE4Mi4zOTFjLTIyLjAxNS0zNS4wNzUtNDMuOTQ0LTcwLTY2LjI0Mi0xMDUuNTIzTDg1LjUwNywxNjEuMDIybDI3LjkyNywxNC44N0wxMzguMywxMzYuMzQ0bDM4LjIyOSw2MC45LTI3LjYxNiwxNC43MTRjLTMuNDQ1LTUuNDMyLTYuODIxLTEwLjc1LTEwLjYxNy0xNi43MjhMMTI3LjQ4MiwyMTIuNjlsLTgzLjYtNDQuMTc3Qzc1LjM3LDExOC4zNDYsMTA2LjY2OCw2OC40NiwxMzguMjg2LDE4LjA3WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQzLjg4IC0xOC4wNykiIGZpbGw9IiNmZmYiLz4NCjwvc3ZnPg0K);"></i> <span class="vaax-title">VAAX Multimedia Agentur</span></a>
  </div></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script><script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script><script src="https://js.stripe.com/v3/"></script><script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script><script src="assets/js/script.min.js"></script></body></html>